<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>Delete CyRide Routes</title>
<link type="text/css" href="css/cyride.css" rel="stylesheet" />
<script type="text/javascript"
	src="http://code.jquery.com/jquery-1.5.2.min.js"></script>
<script type="text/javascript">

$().ready(function() {
	getCount();
	
	$("button#delete").click(function() {
		deleteAll();
	});
	$("button#getCount").click(function() {
		getCount();
	});
});

function getCount() {
	$().ready(function() {
		$.ajax({url:"/getcount", success:function(data) {
			$("div#count").html(data);
		}, error:function() { alert("Error"); }});
	});
}

function deleteAll() {
	$().ready(function() {
		$("#loading").css("display", "inline");
		$.ajax({url:"/DeleteAll", success:function(data) { $.get("/updatecount", function() { getCount();}); alert("Deleted All"); $("#loading").hide();}, 
			error:function() { $("div#error").append("Error<br />"); $.get("/updatecount"); deleteAll(); }});
	});
}

</script>
</head>

<body>
<button id="getCount">Get Count</button>
<div id="count" style="display: inline; margin-left: 1em"></div>

<br />
<br />
<button id="delete">Delete</button><div id="loading" style="display: none; margin-left: 1em"><img src='images/ajax-loader.gif' /></div>
<div id="error"></div>
</body>
</html>